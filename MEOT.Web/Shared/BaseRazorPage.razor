@using MEOT.lib.Objects

@inject Blazored.LocalStorage.ILocalStorageService LocalStorage

@code {
    public bool IsAuthenticated => User != null;

    public User User { get; private set; }

    private const string Key = "user";

    protected override async Task OnInitializedAsync()
    {
        if (await LocalStorage.ContainKeyAsync(Key))
        {
            User = await LocalStorage.GetItemAsync<User>(Key);
        }
    }

    protected async void Logout()
    {
        await LocalStorage.RemoveItemAsync(Key);
    }

    protected async Task LoginAsync(User user) {
         await LocalStorage.SetItemAsync(Key, user);
    }
}