@page "/AddEditMalware"

@using MEOT.lib.DAL.Base
@using MEOT.lib.Objects

@inject IDAL db
@inject NavigationManager NavManager

<h1>Add New Tracked Malware</h1>

<EditForm Model="@model" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />
    
    <InputText id="name" @bind-Value="model.Name" />
    
    <InputText id="sha1" @bind-Value="model.SHA1" />
    
    <InputText id="format" @bind-Value="model.Format" />

    <button type="submit" class="btn-primary">Save</button>
</EditForm>

@code {
    private Malware model = new Malware();

    private void HandleValidSubmit()
    {
        db.Insert(model);

        NavManager.NavigateTo("/ManageMalware");
    }
}